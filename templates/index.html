<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upcoming Auctions</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="header">
        <div class="container">
            <h1 class="text-center">Upcoming Auctions</h1>
        </div>
    </div>

    <div class="container-fluid">
        {% if error %}
        <div class="error-message">
            {{ error }}
        </div>
        {% endif %}

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'horses' %}active{% endif %}" id="horses-tab" data-bs-toggle="tab" data-bs-target="#horses" type="button" role="tab" aria-controls="horses" aria-selected="{{ 'true' if initial_tab == 'horses' else 'false' }}">Horses</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'dams' %}active{% endif %}" id="dams-tab" data-bs-toggle="tab" data-bs-target="#dams" type="button" role="tab" aria-controls="dams" aria-selected="{{ 'true' if initial_tab == 'dams' else 'false' }}">Dams</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'auctions' %}active{% endif %}" id="auctions-tab" data-bs-toggle="tab" data-bs-target="#auctions" type="button" role="tab" aria-controls="auctions" aria-selected="{{ 'true' if initial_tab == 'auctions' else 'false' }}">Past Auctions</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'auctioned-horses' %}active{% endif %}" id="auctioned-horses-tab" data-bs-toggle="tab" data-bs-target="#auctioned-horses" type="button" role="tab" aria-controls="auctioned-horses" aria-selected="{{ 'true' if initial_tab == 'auctioned-horses' else 'false' }}">Auctioned Horses</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'reports' %}active{% endif %}" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab" aria-controls="reports" aria-selected="{{ 'true' if initial_tab == 'reports' else 'false' }}">Reports</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if initial_tab == 'test' %}active{% endif %}" id="test-tab" data-bs-toggle="tab" data-bs-target="#test" type="button" role="tab" aria-controls="test" aria-selected="{{ 'true' if initial_tab == 'test' else 'false' }}">Test</button>
            </li>
        </ul>
    
        <div class="tab-content" id="myTabContent">
            <!--Horses Tab-->
            <div class="tab-pane fade {% if initial_tab == 'horses' %}show active{% endif %}" 
                id="horses" role="tabpanel" aria-labelledby="horses-tab">
                <form method="get" action="{{ url_for('index') }}">
                    <div class="table-wrapper">
                    {% set table_id = "horses" %}
                    {% set filters = horses_filters %}
                    {% set columns = horses_columns %}
                    {% set data = horses_data %}
                    {% set column_groups = column_groups %}
                    {% set column_groups_h2 = column_groups_horses_h2 %}
                    {% include "table_template.html" %}
                </div>
                </form>
            </div>
            <!--Dams Tab-->
            <div class="tab-pane fade {% if initial_tab == 'dams' %}show active{% endif %}"
                 id="dams" role="tabpanel" aria-labelledby="dams-tab">
                 <form method="get" action="{{ url_for('index') }}">
                <div class="table-wrapper">
                    {% set table_id = "dams" %}
                    {% set filters = dams_filters %}
                    {% set columns = dams_columns %}
                    {% set data = dams_data %}
                    {% set column_groups = column_groups_dams %}
                    {% set column_groups_h2 = column_groups_dams_h2 %}
                    {% include "table_template.html" %}
                </div>
                 </form>
            </div>

            <!--Past Auction Summary Tab-->
            <div class="tab-pane fade {% if initial_tab == 'auctions' %}show active{% endif %}" 
                id="auctions" role="tabpanel" aria-labelledby="auctions-tab">
                <form method="get" action="{{ url_for('index') }}">
                <div class="table-wrapper">
                    {% set table_id = "auctions" %}
                    {% set filters = auctions_filters %}
                    {% set columns = auction_summary_columns %}
                    {% set data = auction_summary_data %}
                    {% set column_groups = column_groups_past_auction_summary %}
                    {% set column_groups_h2 = column_groups_past_auction_summary_h2 %}
                    {% include "table_template.html" %}
                </div>
                </form>
            </div>

            <!--Test Mati Tab-->
            <div class="tab-pane fade {% if initial_tab == 'test' %}show active{% endif %}" 
                id="test" role="tabpanel" aria-labelledby="test-tab">
                <form method="get" action="{{ url_for('index') }}">
                <div class="table-wrapper">
                    {% set table_id = "test" %}
                    {% set filters = test_filters %}
                    {% set columns = test_columns %}
                    {% set data = test_data %}
                    {% set column_groups = column_groups_test %}
                    {% set column_groups_h2 = column_groups_test_h2 %}
                    {% include "table_template.html" %}
                </div>
                </form>
            </div>
            <!--Auctioned Horses Tab-->
            <div class="tab-pane fade {% if initial_tab == 'auctioned_horses' %}show active{% endif %}" 
            id="auctioned_horses" role="tabpanel" aria-labelledby="auctioned-horses-tab">
            <form method="get" action="{{ url_for('index') }}">
            <div class="table-wrapper">
                {% set table_id = "auctioned_horses" %}
                {% set filters = auctioned_horses_filters %}
                {% set columns = auctioned_horses_columns %}
                {% set data = auctioned_horses_data %}
                {% set column_groups =column_groups_auctioned_horses %}
                {% set column_groups_h2 = column_groups_auctioned_horses_h2 %}
                {% include "table_template.html" %}
            </div>
            </form>
                
            </div>
      <!-- Reports Tabs -->
      <div class="tab-pane fade {% if initial_tab == 'reports' %}show active{% endif %}" 
      id="reports" role="tabpanel" aria-labelledby="reports-tab">
        <select id="pdf-select">
            <option value="Report Firmamento (criador).pdf">Report Firmamento (criador)</option>
            <option value="Report Firmamento (stud).pdf">Report Firmamento (stud)</option>
            <option value="Proposal La Pasion - 22-03-2024.pdf">Proposal La Pasion 22-03-2024</option>
          </select>
          
          <iframe id="pdf-frame"
                  src="{{ url_for('static', filename='reports/Report Firmamento (criador).pdf') }}"
                  width="100%" height="2000px"
                  style="border: none;">
          </iframe>           
    </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        const horsesMaxValues = {{ horses_max_values | tojson }};
        const damsMaxValues = {{ dams_max_values | tojson }};
        const auctioned_horses_max_values = {{ auctioned_horses_max_values | tojson }};
        const testMaxValues = {{ test_mati_max_values | tojson }};

    document.getElementById('pdf-select').addEventListener('change', function() {
        const selectedPDF = this.value;
        document.getElementById('pdf-frame').src = `/static/reports/${selectedPDF}`;
    });
    </script>
    
</body>
</html> 